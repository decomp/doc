\documentclass[12pt, a4paper]{article}

\usepackage{preamble}

\title{Evaluation of Methods for Effective Control Flow Recovery}
\author{Robin Eklind, 870915-0216}

\begin{document}

\maketitle

\section{Introduction}

Control flow recovery is the process of identifying the structures of high-level control flow primitives, such as 2-way conditionals (i.e. \textit{if-else} statements) and pre-test loops (i.e. \textit{for-loop} statements), in unstructured control flow graphs (CFGs).

Information of high-level control flow primitives in the original source code is lost during compilation, and the recovery of such information presents interesting challenges since compiler optimizations (such as jump threading and code relocation) may produce irreducible graphs \cite{cifuentes_reverse_comp}. Solutions to this problem domain therefore include trade-offs between preservation of the original CFG and introduction of additional nodes (e.g. auxiliary conditional nodes \cite{no_more_gotos} or code duplication through node splitting \cite{node_splitting}) to recovery high-level control flow primitives from otherwise irreducible CFGs.

The applications of control flow recovery are versatile. It may be used to:

\begin{itemize}
	\item facilitate malware analysis
	\item provide information for branch prediction
	\item discover and mitigate bugs and security vulnerabilities
	\item recover source code with high-level control flow primitives
	\item facilitate verification of compiler output (e.g. Reflections on Trusting Trust \cite{trusting_trust})
	\item analyze proprietary algorithms
\end{itemize}

\subsection{Project aim and objectives}

The aim of this project is to evaluate a set of control flow recovery methods, and assess their effectiveness at identifying high-level control flow primitives in control flow graphs.

In order to achieve this aim, the author will:

\begin{enumerate}
	\item Define a metric for measuring the effectiveness of control flow recovery.
	\item Review a set of control flow recovery methods presented in research.
	\item Determine if there exist public implementations for the reviewed control flow recovery methods; and if not develop implementations.
	\item Evaluate the control flow recovery methods against the defined effectiveness metric.
\end{enumerate}

\subsection{Project deliverables}

Documents to be produced:

\begin{itemize}
	\item Project report.
\end{itemize}

System artefacts to be developed:

\begin{itemize}
	\item Library for control flow analysis with support for a set of control flow recovery methods; refer to objective 3.
	\item Tool for performing control flow recovery on a given CFG; refer to objective 4.
\end{itemize}

\section{Methodology}

\subsection{Project approach}

Use the Clang compiler to produce test cases, as it is capable of emitting LLVM IR from C source code. The goal will be to reconstruct the high-level control flow primitives (such as \textit{for-loops}, \textit{if-else} statements) of the original C code from the LLVM IR.

A preliminary metric for the effectiveness of control flow recovery is how many of the original high-level control flow primitives that were recovered and how many were omitted. The metric for effectiveness should also includes a notion of false positives for high-level primitives that were recovered but were not part of the original source code. The metric for effective control flow recovery will be refined as more intuition is gained in the problem domain, and the final metric for effective control flow recovery will be clearly defined as part of the project.

All work will be made available on GitHub from day one, and the source code will be released into the public domain to encourage open source adaptation. The project plan will be organized using the GitHub issue tracker, where each issue corresponds to a task. Milestones, containing a set of issues, will track the progress of the project and enforce deadlines.

\subsection{Evaluation Process}

TODO

\subsection{Criteria for Selection of Test Programs}

TODO

\section{Background}

The following section introduces a set of control flow analysis methods and describes their core ideas. The effectiveness of their control flow recovery will be evaluated.

\textit{Starting point of research:}

\begin{itemize}
	% Preservation of original control flow graph structure (use case forensics)
	\item C. Cifuentes, Reverse Compilation Techniques \cite{cifuentes_reverse_comp}
	\item K. Yakdan, S. Dechand, E. Gerhards-Padilla and M. Smith, Helping Johnny to Analyze Malware: A Usability-Optimized Decompiler and Malware Analysis User Study \cite{helping_johnny}
	\item E. Schwartz, J. Lee, M. Woo and D. Brumley, Native x86 Decompilation using Semantics-Preserving Structural Analysis and Iterative Control-Flow Structuring \cite{semantics_preserving_structural_analysis}
	% Introduction of auxiliary control variables
	\item K. Yakdan, S. Eschweiler, E. Gerhards-Padilla and M. Smith, No More Gotos: Decompilation Using Pattern-Independent Control-Flow Structuring and Semantics-Preserving Transformations \cite{no_more_gotos}
	\item T. Conradi, Matching of Control- and Data-Flow Constructs in Disassembled Code \cite{pdg_control_flow_analysis}
	% Node splitting
	\item S. Moll, Decompilation of LLVM IR \cite{node_splitting}
\end{itemize}

\section{Requirements}

TODO

\section{Evaluation}

\subsection{Outcome of mandatory objectives}

TODO

\subsection{Outcome of minor objectives of incremental nature}

TODO

\subsection{Effectiveness of Control Flow Recovery Methods}

This section describes how well the control flow recovery methods worked, and highlights their limitations.

\subsection{Intuition behind Indentified Deficiencies in Control Flow Recovery Methods}

\textit{Note, this section is a considered a supplementary goal wish may appear in the final report.}

This section describes identified deficiencies in the various control flow recovery methods, and seeks to provide insight into why they occur.

\section{Conclusion}

\subsection{Future Research}

As a future research topic, it would be very interesting to combine a variety of control flow recovery methods, and evaluate if they may facilitate each other to further improve control flow recovery.

Evaluate how the control flow recovery methods deal with irreducible graphs, as produces by various compiler optimizations (e.g. jump threading).

\clearpage

\bibliography{references}

\end{document}
