% --- [ Middle-end Components ] ------------------------------------------------

% <howto>
% * more detailed design of individual components (design)

% <howto>
% * The intention is that the design should be detailed enough to provide a good guide for actual coding, including details of any particular algorithms to be used.

\subsection{Middle-end Components}
\label{sec:middle-end_components}

The middle-end module is responsible for lifting the low-level IR generated by the front-end to a higher level. This is achieved through a set of decompilation stages, which identify high-level control flow primitives and, as a future ambition, propagate expressions. The former decompilation stage consists of two self-contained components which separate concerns related to the control flow analysis from the underlying details of LLVM IR. The first component generates unstructured CFGs from LLVM IR, as further described in section \ref{sec:design_control_flow_graph_generation}. And the second component structures the generated CFGs by identifying high-level control flow primitives, as further described in section \ref{sec:design_control_flow_analysis}. The interaction between the front-end, the \texttt{ll2dot} and \texttt{restructure} tools of the middle-end and the back-end is illustrated in figure \ref{fig:middle-end}.

\begin{figure}[htbp]
	\begin{center}
		\includegraphics[width=\textwidth]{inc/middle-end.png}
		\caption{The middle-end module performs a control flow analysis on the LLVM IR in two steps. Firstly, the \texttt{ll2dot} tool generates unstructured CFGs (in the DOT file format) from LLVM IR. Secondly, the \texttt{restructure} tool produces a structured CFG (in JSON format) by identifying high-level control flow primitives in the unstructured CFG.}
		\label{fig:middle-end}
	\end{center}
\end{figure}

% --- [ Subsubsections ] -------------------------------------------------------

\input{sections/6_design/3_middle-end_components/1_control_flow_graph_generation}
\input{sections/6_design/3_middle-end_components/2_control_flow_analysis}
