% --- [ Decompilation of Nested Primitives ] -----------------------------------

\subsection{Decompilation of Nested Primitives}

The following section demonstrates the decompilation of a source program which contains nested primitives. For comparison, the original C source code is presented alongside of the decompiled Go output in figure \ref{fig:nested_comparison}. Please note that the middle-end and back-end modules of the decompilation pipeline are only given access to the LLVM IR (see listing \ref{lst:nested_ll}) produced by the front-end (as described in appendix \ref{app:clang_example}), and are completely unaware of the original C source code. When decompiling LLVM IR generated from native code, the original names of identifiers may be missing.

\begin{figure}[htbp]
	\centering
	\begin{subfigure}[t]{0.49\textwidth}
		\lstinputlisting[language=C, style=c]{inc/appendices/decompilation_of_nested_primitives/nested.c}
	\end{subfigure}
	\qquad
	\begin{subfigure}[t]{0.45\textwidth}
		\lstinputlisting[language=go, style=go]{inc/appendices/decompilation_of_nested_primitives/nested.go}
	\end{subfigure}
	\caption{The original C source code (left) and the decompiled Go output (right).}
	\label{fig:nested_comparison}
\end{figure}

\lstinputlisting[language=llvm, style=nasm, caption={The LLVM IR assembly which was produced by Clang when compiling the C source code presented on the left side of listing \ref{fig:nested_comparison}. \label{lst:nested_ll}}]{inc/appendices/decompilation_of_nested_primitives/nested.ll}
